(this["webpackJsonpdiary-js"]=this["webpackJsonpdiary-js"]||[]).push([[0],{20:function(e,t,n){"use strict";n.r(t);var i,a=n(9),r=n.n(a),s=n(13),o=n.n(s),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),i(e),a(e),r(e),s(e)}))},u=n(0),c=n(1),d=n(12),h=function(){function e(t,n){var i=this;Object(u.a)(this,e),this._routes=void 0,this._defaultRoute=void 0,this._actualRoute=void 0,window.addEventListener("popstate",(function(e){return i.route()})),this._routes=t,this._defaultRoute=n,this._actualRoute=""}return Object(c.a)(e,[{key:"getActualRoute",value:function(){return this._actualRoute}},{key:"route",value:function(){for(var e=!1,t=window.location.hash,n=0,i=Object.entries(this._routes);n<i.length;n++){var a=Object(d.a)(i[n],2),r=a[0],s=a[1];if("#"+r==t){this._actualRoute=r,s.init()&&(e=!0);break}}e||this.routeDefault()}},{key:"routeTo",value:function(e){for(var t=!1,n=0,i=Object.entries(this._routes);n<i.length;n++){var a=Object(d.a)(i[n],2),r=a[0];a[1];r==e&&(t=!0)}t?(this._actualRoute=e,window.location.hash="#"+e,this._routes[e].init()):console.log("route %s does not exist",e)}},{key:"routeDefault",value:function(){this._actualRoute=this._defaultRoute.name,window.location.hash="#"+this._defaultRoute.name,this._defaultRoute.control.init()}}]),e}(),v=function(){function e(t,n){var i=this;Object(u.a)(this,e),this.name=void 0,this.storedClasses=void 0,this.data=void 0,this.name=t,this.storedClasses={},this.data=[],n.forEach((function(e){i.storedClasses[(new e).getStorageClassName()]=e}))}return Object(c.a)(e,[{key:"getData",value:function(){return this.data}},{key:"load",value:function(){var e=this,t=window.localStorage.getItem(this.name);null==t?this.save():this.data=JSON.parse(t,(function(t,n){if("object"===typeof n&&"_storageClassName"in n){var i=new e.storedClasses[n._storageClassName];return Object.assign(i,n)}return n}))}},{key:"save",value:function(){window.localStorage.setItem(this.name,JSON.stringify(this.data))}}]),e}(),m=n(7),p=n(5),y=n(4),_=n(3),f=function(){function e(t){Object(u.a)(this,e),this._app=void 0,this._app=t}return Object(c.a)(e,[{key:"init",value:function(){return!0}}]),e}(),b=n(2),g=function(){function e(){Object(u.a)(this,e),this._navEl=void 0,this._userEl=void 0,this._user=void 0,this._navEl=document.querySelector("header nav"),this._userEl=document.getElementById("user"),this._user=""}return Object(c.a)(e,[{key:"init",value:function(e){this._navEl.innerHTML=this._nav(e),this._userEl.innerHTML=this._user}},{key:"_nav",value:function(e){return String.raw(i||(i=Object(b.a)(['\n            <ul>\n                <li>\n                    <a href="#main" ','>Main page</a>\n                </li>\n                <li>\n                    <a href="#login" ','>Login</a>\n                </li>\n                <li>\n                    <a href="#register" ',">Register</a>\n                </li>\n            </ul>\n        "])),"main"==e?'id="pageSelected"':"","login"==e?'id="pageSelected"':"","register"==e?'id="pageSelected"':"")}}]),e}(),w={blue:{headerFooter:"#12146b",mainBg:"#191c94",text:"white",mandatory:"#ff4e00",dark:"#070f3d",note:"#070f3d",noteBgHover:"#00a0d5",tableSelected:"#1b62c2",tableSelectedHover:"#14478c",tableButtonBg:"#00a0d5",error:"#ff4e00"},green:{headerFooter:"#239311",mainBg:"#30cf16",text:"black",mandatory:"#bd0000",dark:"#0f3d07",note:"#053007",noteBgHover:"#46ee4e",tableSelected:"#108d16",tableSelectedHover:"#0b5b0e",tableButtonBg:"#46ee4e",error:"#bd0000"}};function E(e){var t=document.documentElement,n=w[e];t.style.setProperty("--header-footer-color",n.headerFooter),t.style.setProperty("--main-bg-color",n.mainBg),t.style.setProperty("--text-color",n.text),t.style.setProperty("--mandatory-color",n.mandatory),t.style.setProperty("--dark-color",n.dark),t.style.setProperty("--note-color",n.note),t.style.setProperty("--note-bg-color-hover",n.noteBgHover),t.style.setProperty("--table-selected-color",n.tableSelected),t.style.setProperty("--table-selected-hover-color",n.tableSelectedHover),t.style.setProperty("--table-button-bg-color",n.tableButtonBg),t.style.setProperty("--error-color",n.error)}var j,k,O,D,I,S,F,N=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._loggedOutView=void 0,i._loggedOutView=new g,i}return Object(c.a)(n,[{key:"init",value:function(){return E("blue"),this._loggedOutView.init(this._app.router.getActualRoute()),!0}}]),n}(f),x=function(){function e(t){Object(u.a)(this,e),this._storageClassName=void 0,this._storageClassName=t}return Object(c.a)(e,[{key:"getStorageClassName",value:function(){return this._storageClassName}}]),e}(),L=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],C=["Mo","Tu","We","Th","Fr","Sa","Su"],M=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"Date")).day=1,e.month=1,e.year=1,e}return Object(c.a)(n,[{key:"getMonthName",value:function(){return L[this.month]}},{key:"getDayInWeekName",value:function(){return new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(this.toDate()).toString()}},{key:"getDayInWeekShortName",value:function(){return C[this.getDayInWeek()]}},{key:"getDayInWeek",value:function(){return new Date(this.year,this.month,this.day).getDay()}},{key:"getDaysInMonth",value:function(){var e=new Date,t=e.getMonth()+1,n=e.getFullYear();return new Date(n,t,0).getDate()}},{key:"incrementMonth",value:function(){var e=new Date(this.year,this.month+1,1);this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate()}},{key:"dencrementMonth",value:function(){var e=new Date(this.year,this.month-1,1);this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate()}},{key:"toDate",value:function(){return new Date(this.year,this.month,this.day)}},{key:"toString",value:function(){return this.getDayInWeekName()+" "+String(this.day)+". "+L[this.month]+" "+String(this.year)}},{key:"compare",value:function(e){return this.day==e.day&&this.month==e.month&&this.year==e.year}},{key:"makeCopy",value:function(){return n.createDate(this.day,this.month,this.year)}}],[{key:"createDate",value:function(e,t,i){var a=new n;return a.day=e,a.month=t,a.year=i,a}},{key:"createCurrentDate",value:function(){var e=new Date;return this.createDate(e.getDate(),e.getMonth(),e.getFullYear())}},{key:"getDayShorts",value:function(){return C}}]),n}(x),T={buildDate:new Date(2021,9,2),packageInfo:{name:"diary-js",homepage:"http://shetr.github.io/diary-js",version:"1.1.4",description:"Reworked version of zwa-diary-js.",main:"src/index.tsx",author:{name:"Petr \u0160\xe1dek",email:"shetr.git@gmail.com"},dependencies:{"@testing-library/jest-dom":"^5.14.1","@testing-library/react":"^11.2.7","@testing-library/user-event":"^12.8.3","@types/jest":"^26.0.24","@types/node":"^12.20.27","@types/react":"^17.0.26","@types/react-dom":"^17.0.9","gh-pages":"^3.2.3",react:"^17.0.2","react-dom":"^17.0.2","react-scripts":"4.0.3",typescript:"^4.4.3","web-vitals":"^1.1.2"},scripts:{gen:"node scripts/gen-project-info.js src/gen/projectInfo.ts",start:"react-scripts start",build:"npm run gen && react-scripts build",test:"react-scripts test",deploy:"gh-pages -d build","build-deploy":"npm run build && npm run deploy",eject:"react-scripts eject"},eslintConfig:{extends:["react-app","react-app/jest"]},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}},P=function(){function e(){Object(u.a)(this,e),this._headlineEl=void 0,this._mainEl=void 0,this._footerEl=void 0,this._formEl=void 0,this._headline=void 0,this._footer=void 0,this._headlineEl=document.querySelector("header h1"),this._mainEl=document.querySelector("main"),this._footerEl=document.querySelector("footer"),this._formEl=null,this._headline="Diary";var t=T.packageInfo.author.name,n=T.buildDate.getFullYear(),i=T.packageInfo.version;this._footer="".concat(n,"&nbsp;&nbsp;&nbsp;").concat(t,"&nbsp;&nbsp;&nbsp;v").concat(i)}return Object(c.a)(e,[{key:"getForm",value:function(){return this._formEl}},{key:"init",value:function(){this._headlineEl.innerHTML=this._headline,document.title=this._headline,this._footerEl.innerHTML=this._footer,this._mainEl.innerHTML=this._basicCalendar(),this._formEl=document.querySelector("form")}},{key:"_basicCalendar",value:function(){var e=M.createCurrentDate();return String.raw(j||(j=Object(b.a)(['\n            <div id="currentDate">Today is ','</div>\n            <form method="post" action="">\n                <div id="calendar"></div>\n            </form>\n        '])),e.toString())}}]),e}(),B=function(){function e(){Object(u.a)(this,e),this._calendarWrapperEl=void 0,this._calendarBodyEl=void 0,this._calendarWrapperEl=null,this._calendarBodyEl=null}return Object(c.a)(e,[{key:"init",value:function(e,t,n){this._calendarWrapperEl=document.getElementById("calendar"),this._calendarWrapperEl.innerHTML=this._calendar(e),this._calendarBodyEl=document.querySelector("tbody"),this._calendarBodyEl.innerHTML=this._calendarBody(e,t,n)}},{key:"selectCell",value:function(e){var t=document.getElementById("day"+String(e));null!=t&&t.classList.add("selectedTab")}},{key:"deselectCell",value:function(e){var t=document.getElementById("day"+String(e));null!=t&&t.classList.remove("selectedTab")}},{key:"_calendar",value:function(e){return String.raw(k||(k=Object(b.a)(['\n            <table>\n                <thead>\n                <tr> \n                    <td colspan="5">\n                        <div class="buttonTab">\n                            '," ",'\n                        </div>\n                    </td> \n                    <td>\n                        <input class="buttonTab" type="submit" name="changeMonthLeft" value="<">\n                    </td> \n                    <td>\n                        <input class="buttonTab" type="submit" name="changeMonthRight" value=">">\n                    </td> \n                </tr>\n                <tr>\n                    ',"\n                </tr>\n                </thead>\n                <tbody>\n                    \n                </tbody>\n            </table>\n        "])),e.getMonthName(),e.year,H(M.getDayShorts().map((function(e){return String.raw(O||(O=Object(b.a)(["\n                        <td>\n                            <div>\n                                ","\n                            </div>\n                        </td>\n                    "])),e)}))))}},{key:"_calendarBody",value:function(e,t,n){var i=this._calendarCells(e,t,n);return String.raw(D||(D=Object(b.a)(["\n            ","\n        "])),H(i.map((function(e){return String.raw(I||(I=Object(b.a)(["\n\t            <tr>\n                    ","\n                </tr>\n            "])),H(e))}))))}},{key:"_calendarCells",value:function(e,t,n){for(var i=M.createDate(1,e.month,e.year),a=i.getDayInWeek(),r=M.createCurrentDate(),s=[],o=i.getDaysInMonth(),l=2-a;o>0;){for(var u=[],c=0;c<M.getDayShorts().length;c++){if(l<1||o<=0)u.push(this._otherMonthCell());else{var d=!1;t==l&&(d=!0),l==r.day&&e.month==r.month&&e.year==r.year?u.push(this._cell(d,"todayTab",l)):n.includes(l)?u.push(this._cell(d,"noteTab",l)):u.push(this._cell(d,"activeCellTab",l)),o--}l++}s.push(u)}return s}},{key:"_cell",value:function(e,t,n){return String.raw(S||(S=Object(b.a)(['\n            <td id="day','" ','>\n                    <input class="','" type="submit" name="selectDay" value="','">\n            </td>\n        '])),n,e?'class ="selectedTab"':"",t,n)}},{key:"_otherMonthCell",value:function(){return String.raw(F||(F=Object(b.a)(['\n            <td>\n                <div class="deactivatedCellTab">\n                    <svg width="20" height="20" viewBox="0 0 10 10">\n                        <line x1="0" y1="0" x2="10" y2="10"/>\n                        <line x1="0" y1="10" x2="10" y2="0"/>\n                    </svg>\n                </div>\n            </td>\n        '])))}}]),e}();function H(e){return e.reduce((function(e,t){return e+t}),"")}var q,R,W=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e)).noteDays=void 0,i._view=void 0,i._selectedDay=void 0,i._date=void 0,i._view=new B,i._selectedDay=-1,i._date=new M,i.noteDays=[],i}return Object(c.a)(n,[{key:"init",value:function(){return this._selectedDay=-1,this._date=M.createCurrentDate(),this._view.init(this._date,this._selectedDay,this.noteDays),!0}},{key:"update",value:function(){this._view.init(this._date,this._selectedDay,this.noteDays)}},{key:"getSelectedDay",value:function(){return this._selectedDay}},{key:"getDate",value:function(){return this._date}},{key:"submitForm",value:function(e){if("selectDay"==e.name){var t=parseInt(e.value);this._view.deselectCell(this._selectedDay),this._view.selectCell(t),this._selectedDay=t,this._date.day=t}else"changeMonthLeft"==e.name?(this._selectedDay=-1,this._date.dencrementMonth(),this._view.init(this._date,this._selectedDay,this.noteDays)):"changeMonthRight"==e.name&&(this._selectedDay=-1,this._date.incrementMonth(),this._view.init(this._date,this._selectedDay,this.noteDays))}}]),n}(f),U=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._view=void 0,i._calendar=void 0,i._view=new P,i._calendar=new W(e),i}return Object(c.a)(n,[{key:"init",value:function(){var e=this,t=Object(m.a)(Object(p.a)(n.prototype),"init",this).call(this);t&&(this._view.init(),this._calendar.init(),this._view.getForm().addEventListener("submit",(function(t){t.preventDefault(),e._calendar.submitForm(t.submitter)})));return t}}]),n}(N),A=function(){function e(){Object(u.a)(this,e),this._headlineEl=void 0,this._mainEl=void 0,this._loginFormEl=void 0,this._emailInputEl=void 0,this._passwordInputEl=void 0,this._errorEl=void 0,this._headline=void 0,this._headlineEl=document.querySelector("header h1"),this._mainEl=document.querySelector("main"),this._loginFormEl=null,this._emailInputEl=null,this._passwordInputEl=null,this._errorEl=null,this._headline="Login"}return Object(c.a)(e,[{key:"init",value:function(){this._headlineEl.innerHTML=this._headline,document.title=this._headline,this._mainEl.innerHTML=this._loginForm(),this._loginFormEl=document.querySelector("form"),this._emailInputEl=document.getElementById("email"),this._passwordInputEl=document.getElementById("password"),this._errorEl=document.querySelector("p.error")}},{key:"getForm",value:function(){return this._loginFormEl}},{key:"getEmailInput",value:function(){return this._emailInputEl}},{key:"getPasswordInput",value:function(){return this._passwordInputEl}},{key:"clearErrors",value:function(){this._errorEl.textContent=""}},{key:"setError",value:function(e){this._errorEl.textContent=e}},{key:"_loginForm",value:function(){return String.raw(q||(q=Object(b.a)(['\n            <form method="post" action="">\n                <label>\n                    Email: <span class="mandatory">*</span>\n                    <input id="email" required type="email" name="email"/>\n                </label>\n                <label>\n                    Password: <span class="mandatory">*</span>\n                    <input id="password" required type="password" name="password" />\n                </label>\n                <p class="error"></p>\n                <input class="submitForm" type="submit" value="Login">\n                <p> Fields with <span class="mandatory">*</span> are mandatory. </p>\n            </form>\n        '])))}}]),e}(),J=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._view=void 0,i._view=new A,i}return Object(c.a)(n,[{key:"init",value:function(){var e=this,t=Object(m.a)(Object(p.a)(n.prototype),"init",this).call(this);return t&&(this._view.init(),this._view.getForm().addEventListener("submit",(function(t){t.preventDefault(),e._submitForm()}))),t}},{key:"_submitForm",value:function(){var e=this,t=this._view.getEmailInput().value,n=this._view.getPasswordInput().value,i=this._findUser(t);null!=i?i.doesPasswordMatch(n).then((function(t){t?(e._app.user=i,e._app.router.routeTo("diary")):e._view.setError("Incorrect email or password.")})):this._view.setError("Incorrect email or password.")}},{key:"_findUser",value:function(e){var t=this._app.getUsers().getData(),n=null;return t.forEach((function(t){t.email==e&&(n=t)})),n}}]),n}(N),V=function(){function e(){Object(u.a)(this,e),this._headlineEl=void 0,this._mainEl=void 0,this._registerFormEl=void 0,this._emailInputEl=void 0,this._password1InputEl=void 0,this._password2InputEl=void 0,this._errorEl=void 0,this._headline=void 0,this._headlineEl=document.querySelector("header h1"),this._mainEl=document.querySelector("main"),this._registerFormEl=null,this._emailInputEl=null,this._password1InputEl=null,this._password2InputEl=null,this._errorEl=null,this._headline="Register"}return Object(c.a)(e,[{key:"init",value:function(){this._headlineEl.innerHTML=this._headline,document.title=this._headline,this._mainEl.innerHTML=this._registerForm(),this._registerFormEl=document.querySelector("form"),this._emailInputEl=document.getElementById("email"),this._password1InputEl=document.getElementById("password1"),this._password2InputEl=document.getElementById("password2"),this._errorEl=document.querySelector("p.error")}},{key:"getForm",value:function(){return this._registerFormEl}},{key:"getEmailInput",value:function(){return this._emailInputEl}},{key:"getPassword1Input",value:function(){return this._password1InputEl}},{key:"getPassword2Input",value:function(){return this._password2InputEl}},{key:"clearErrors",value:function(){this._errorEl.textContent="",this._emailInputEl.classList.remove("error"),this._password1InputEl.classList.remove("error"),this._password2InputEl.classList.remove("error")}},{key:"setEmailError",value:function(e){this._errorEl.textContent=e,this._emailInputEl.classList.add("error")}},{key:"setPassword1Error",value:function(e){this._errorEl.textContent=e,this._password1InputEl.classList.add("error")}},{key:"setPassword2Error",value:function(e){this._errorEl.textContent=e,this._password2InputEl.classList.add("error")}},{key:"_registerForm",value:function(){return String.raw(R||(R=Object(b.a)(['\n            <form method="post" action="">\n                <label>\n                    Email: <span class="mandatory">*</span>\n                    <input id="email" required type="email" name="email"/>\n                </label>\n                <label>\n                    Password: <span class="mandatory">*</span>\n                    <input id="password1" required type="password" name="password1" />\n                </label>\n                <label>\n                    Password check: <span class="mandatory">*</span>\n                    <input id="password2" required type="password" name="password2" />\n                </label>\n                <p class="error"></p>\n                <input class="submitForm" type="submit" value="Register">\n                <p> Fields with <span class="mandatory">*</span> are mandatory. </p>\n            </form>\n        '])))}}]),e}(),Y=n(8),z=n.n(Y),G=n(10),K=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"User")).email="",e.passwordHash="",e.notes=[],e.diaryNotes=[],e.style="blue",e}return Object(c.a)(n,[{key:"doesPasswordMatch",value:function(){var e=Object(G.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:return n=e.sent,e.abrupt("return",this.passwordHash==n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"createWithPassword",value:function(){var e=Object(G.a)(z.a.mark((function e(t,i){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new n).email=t,e.next=4,Q(i);case 4:return a.passwordHash=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isEmailIncorrect",value:function(e){return e.indexOf("@")>-1&&e.indexOf(".")>-1?e.indexOf("@")>0&&e.indexOf(".")>e.indexOf("@")+1&&e.indexOf(".")<e.length-1?"":"Incorrect email.":"Missing @ or . in the email."}},{key:"isPasswordIncorrect",value:function(e){return e.length<=3?"Password must be longer than 3 characters.":""}}]),n}(x);function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(G.a)(z.a.mark((function e(t){var n,i,a,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new TextEncoder).encode(t),e.next=3,crypto.subtle.digest("SHA-256",n).then();case 3:return i=e.sent,a=Array.from(new Uint8Array(i)),r=a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z,$,ee,te,ne,ie,ae,re,se=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._view=void 0,i._view=new V,i}return Object(c.a)(n,[{key:"init",value:function(){var e=this,t=Object(m.a)(Object(p.a)(n.prototype),"init",this).call(this);return t&&(this._view.init(),this._view.getForm().addEventListener("submit",(function(t){t.preventDefault(),e._submitForm()})),this._view.getEmailInput().addEventListener("keyup",(function(t){t.preventDefault(),e._validateEmail()})),this._view.getPassword1Input().addEventListener("blur",(function(t){t.preventDefault(),e._validatePassword1()})),this._view.getPassword2Input().addEventListener("blur",(function(t){t.preventDefault(),e._validatePassword2()}))),t}},{key:"_submitForm",value:function(){var e=this;if(this._validatePassword2()&&this._validatePassword1()&&this._validateEmail()){var t=this._view.getEmailInput().value,n=this._view.getPassword1Input().value,i=this._app.getUsers();K.createWithPassword(t,n).then((function(t){i.getData().push(t),i.save(),e._app.user=t,e._app.router.routeTo("diary")}))}}},{key:"_validateEmail",value:function(){this._view.clearErrors();var e=this._view.getEmailInput().value,t=K.isEmailIncorrect(e);return t?(this._view.setEmailError(t),!1):!this._isRegistered(e)||(this._view.setEmailError("Such a user already exists."),!1)}},{key:"_validatePassword1",value:function(){this._view.clearErrors();var e=this._view.getPassword1Input().value,t=K.isPasswordIncorrect(e);return!t||(this._view.setPassword1Error(t),!1)}},{key:"_validatePassword2",value:function(){return this._view.clearErrors(),this._view.getPassword1Input().value==this._view.getPassword2Input().value||(this._view.setPassword2Error("Passwords do not match."),!1)}},{key:"_isRegistered",value:function(e){var t=this._app.getUsers().getData(),n=!1;return t.forEach((function(t){t.email==e&&(n=!0)})),n}}]),n}(N),oe=function(){function e(){Object(u.a)(this,e),this._navEl=void 0,this._userEl=void 0,this._emailEl=void 0,this._navEl=document.querySelector("header nav"),this._userEl=document.getElementById("user"),this._emailEl=null}return Object(c.a)(e,[{key:"init",value:function(e,t){this._navEl.innerHTML=this._nav(e),this._userEl.innerHTML=this._user(),this._emailEl=document.getElementById("loggedInUserEmail"),this._emailEl.textContent=t}},{key:"_nav",value:function(e){return String.raw(Z||(Z=Object(b.a)(['\n            <ul>\n                <li>\n                    <a href="#diary" ','>Diary</a>\n                </li>\n                <li>\n                    <a href="#changeStyle" ',">Change style</a>\n                </li>\n            </ul>\n        "])),"diary"==e?'id="pageSelected"':"","changeStyle"==e?'id="pageSelected"':"")}},{key:"_user",value:function(){return String.raw($||($=Object(b.a)(['\n            <div>\n                Logged&nbsp;in:&nbsp;<span id="loggedInUserEmail"></span>\n            </div>\n            <div class="styleLink">\n                <a class="navLink" href="#logout">Logout</a>\n            </div>\n        '])))}}]),e}(),le=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._loggedInView=void 0,i._user=void 0,i._loggedInView=new oe,i._user=new K,i}return Object(c.a)(n,[{key:"init",value:function(){var e=this._app.user;return null!=e&&(this._user=e,E(this._user.style),this._loggedInView.init(this._app.router.getActualRoute(),this._user.email),!0)}}]),n}(f),ue=function(){function e(){Object(u.a)(this,e),this._headlineEl=void 0,this._mainEl=void 0,this._formEl=void 0,this._headline=void 0,this._headlineEl=document.querySelector("header h1"),this._mainEl=document.querySelector("main"),this._formEl=null,this._headline="Diary"}return Object(c.a)(e,[{key:"getForm",value:function(){return this._formEl}},{key:"init",value:function(){this._headlineEl.innerHTML=this._headline,document.title=this._headline,this._mainEl.innerHTML=this._diary(),this._formEl=document.querySelector("form")}},{key:"_diary",value:function(){return String.raw(ee||(ee=Object(b.a)(['\n            <form method="post" action="">\n                <div id="calendar"></div>\n                <div id="diaryNote"></div>\n            </form>\n        '])))}}]),e}(),ce=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"DiaryNote")).date=new M,e.name="",e.description="",e}return Object(c.a)(n,null,[{key:"createDiaryNote",value:function(e,t,i){var a=new n;return a.date=e,a.name=t,a.description=i,a}},{key:"isNameIncorrect",value:function(e){return e.length>100?"The name is too long.":e.length<1?"The name must be at least one character.":""}},{key:"isDescriptionIncorrect",value:function(e){return e.length>2e4?"The description is too long.":""}}]),n}(x),de=function(){function e(){Object(u.a)(this,e),this._diaryNoteWrapperEl=void 0,this._nameEl=void 0,this._descriptionEl=void 0,this._errorEl=void 0,this._diaryNoteWrapperEl=null,this._nameEl=null,this._descriptionEl=null,this._errorEl=null}return Object(c.a)(e,[{key:"init",value:function(){this._diaryNoteWrapperEl=document.getElementById("diaryNote"),this._diaryNoteWrapperEl.innerHTML=""}},{key:"clearNote",value:function(){this._diaryNoteWrapperEl.innerHTML=""}},{key:"noneNote",value:function(){this._diaryNoteWrapperEl.innerHTML=this._noneNote()}},{key:"createNote",value:function(){var e=this;this._diaryNoteWrapperEl.innerHTML=this._createNote(),this._initFormData("",""),this._nameEl.addEventListener("blur",(function(t){return e.clearErrors()})),this._descriptionEl.addEventListener("blur",(function(t){return e.clearErrors()}))}},{key:"changeNote",value:function(e,t){var n=this;this._diaryNoteWrapperEl.innerHTML=this._changeNote(),this._initFormData(e,t),this._nameEl.addEventListener("blur",(function(e){return n.clearErrors()})),this._descriptionEl.addEventListener("blur",(function(e){return n.clearErrors()}))}},{key:"existingNote",value:function(e,t){this._diaryNoteWrapperEl.innerHTML=this._existingNote(),this._initFormData(e,t)}},{key:"_initFormData",value:function(e,t){this._nameEl=document.querySelector("input#name"),this._descriptionEl=document.querySelector("textarea#description"),this._errorEl=document.querySelector("p.error"),this._nameEl.value=e,this._descriptionEl.value=t}},{key:"getNameInput",value:function(){return this._nameEl.value}},{key:"getDescriptionInput",value:function(){return this._descriptionEl.value}},{key:"clearErrors",value:function(){this._errorEl.textContent="",this._nameEl.classList.remove("error"),this._descriptionEl.classList.remove("error")}},{key:"setNameError",value:function(e){this._errorEl.textContent=e,this._nameEl.classList.add("error")}},{key:"setDescriptionError",value:function(e){this._errorEl.textContent=e,this._descriptionEl.classList.add("error")}},{key:"_noneNote",value:function(){return String.raw(te||(te=Object(b.a)(['\n            <input class="submitForm" type="submit" name="createNote" value="Create note">\n        '])))}},{key:"_createNote",value:function(){return String.raw(ne||(ne=Object(b.a)(['\n            <label>\n                Name: <span class="mandatory">*</span>\n                <input id="name" type="text" name="name" value="">\n            </label>\n            <label for="description">\n                Description:\n            </label>\n            <textarea id="description" id="description" name="description" cols="35" rows="15" ></textarea>\n            <p class="error"></p>\n            <input class="submitForm" type="submit" name="create" value="Create">\n            <a class="submitForm" href="javascript:window.print()">Print</a>\n            <input class="submitForm" type="submit" name="cancel" value="Cancel">\n            <p> Fields with <span class="mandatory">*</span> are mandatory. </p>\n        '])))}},{key:"_changeNote",value:function(){return String.raw(ie||(ie=Object(b.a)(['\n            <label>\n                Name: <span class="mandatory">*</span>\n                <input id="name" type="text" name="name" value="">\n            </label>\n            <label for="description">\n                Description:\n            </label>\n            <textarea id="description" id="description" name="description" cols="35" rows="15" ></textarea>\n            <p class="error"></p>\n            <input class="submitForm" type="submit" name="safeChanges" value="Safe changes">\n            <a class="submitForm" href="javascript:window.print()">Print</a>\n            <input class="submitForm" type="submit" name="cancel" value="Cancel">\n            <p> Fields with <span class="mandatory">*</span> are mandatory. </p>\n        '])))}},{key:"_existingNote",value:function(){return String.raw(ae||(ae=Object(b.a)(['\n            <label>\n                Name:\n                <input id="name" readonly type="text" name="name" value="">\n            </label>\n            <label for="description">\n                Description:\n            </label>\n            <textarea readonly id="description" name="description" cols="35" rows="15" ></textarea>\n            <div>\n                <input class="submitForm" type="submit" name="change" value="Change">\n                <a class="submitForm" href="javascript:window.print()">Print</a>\n                <input class="submitForm" type="submit" name="delete" value="Delete">\n            </div>\n        '])))}}]),e}(),he=function(){function e(t,n){Object(u.a)(this,e),this._app=void 0,this._view=void 0,this._calendar=void 0,this._app=t,this._view=new de,this._calendar=n}return Object(c.a)(e,[{key:"init",value:function(e){return this._view.init(),this.update(e),!0}},{key:"update",value:function(e){if(-1==this._calendar.getSelectedDay())this._view.clearNote();else{var t=this._findNote(e);null==t?this._view.noneNote():this._view.existingNote(t.name,t.description)}var n=this._calendar.getDate().makeCopy();this._calendar.noteDays=e.diaryNotes.filter((function(e){return e.date.month==n.month})).map((function(e){return e.date.day})),void 0==this._calendar.noteDays&&(this._calendar.noteDays=[]),this._calendar.update()}},{key:"submitForm",value:function(e,t){if(-1!=this._calendar.getSelectedDay())if("createNote"==e.name)this._view.createNote();else if("create"==e.name||"safeChanges"==e.name){var n=this._calendar.getDate().makeCopy(),i=this._view.getNameInput(),a=this._view.getDescriptionInput();this._view.clearErrors();var r=ce.isNameIncorrect(i);if(r)return void this._view.setNameError(r);if(r=ce.isDescriptionIncorrect(a))return void this._view.setDescriptionError(r);var s=ce.createDiaryNote(n.makeCopy(),i,a),o=t.diaryNotes,l=o.findIndex((function(e){return n.compare(e.date)}));l<0?o.push(s):o[l]=s,this._app.getUsers().save(),this.update(t)}else if("change"==e.name){var u=this._findNote(t);null!=u&&this._view.changeNote(u.name,u.description)}else if("delete"==e.name){var c=this._calendar.getDate().makeCopy(),d=t.diaryNotes;t.diaryNotes=d.filter((function(e){return!e.date.compare(c)})),this._app.getUsers().save(),this.update(t)}else this.update(t);else this.update(t)}},{key:"_findNote",value:function(e){var t=this;return e.diaryNotes.find((function(e){return t._calendar.getDate().compare(e.date)}))}}]),e}(),ve=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._view=void 0,i._calendar=void 0,i._diaryNote=void 0,i._view=new ue,i._calendar=new W(e),i._diaryNote=new he(e,i._calendar),i}return Object(c.a)(n,[{key:"init",value:function(){var e=this,t=Object(m.a)(Object(p.a)(n.prototype),"init",this).call(this);t&&(this._view.init(),this._calendar.init(),this._diaryNote.init(this._user),this._view.getForm().addEventListener("submit",(function(t){t.preventDefault(),e._submitForm(t.submitter)})));return t}},{key:"_submitForm",value:function(e){this._calendar.submitForm(e),this._diaryNote.submitForm(e,this._user)}}]),n}(le),me=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"init",value:function(){return Object(m.a)(Object(p.a)(n.prototype),"init",this).call(this)&&(this._app.user=null),!1}}]),n}(le),pe=function(){function e(){Object(u.a)(this,e),this._headlineEl=void 0,this._mainEl=void 0,this._changeStyleFormEl=void 0,this._headline=void 0,this._headlineEl=document.querySelector("header h1"),this._mainEl=document.querySelector("main"),this._changeStyleFormEl=null,this._headline="Change style"}return Object(c.a)(e,[{key:"init",value:function(e){this._headlineEl.innerHTML=this._headline,document.title=this._headline,this._mainEl.innerHTML=this._changeStyleForm(e),this._changeStyleFormEl=document.querySelector("form")}},{key:"getForm",value:function(){return this._changeStyleFormEl}},{key:"_changeStyleForm",value:function(e){return String.raw(re||(re=Object(b.a)(['\n            <form method="post" action="">\n                <label>\n                    Styles: <span class="mandatory">*</span>\n                </label>\n                <label>\n                    <input class="radioBut" required type="radio" name="style" value="blue" ','>\n                    Blue style\n                </label>\n                <label>\n                    <input class="radioBut" type="radio" name="style" value="green" ','>\n                    Green style\n                </label>\n                <input class="submitForm" type="submit" value="Change">\n                <p> Fields with <span class="mandatory">*</span> are mandatory. </p>\n            </form>\n        '])),"blue"==e?"checked":"","green"==e?"checked":"")}}]),e}(),ye=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(e){var i;return Object(u.a)(this,n),(i=t.call(this,e))._view=void 0,i._view=new pe,i}return Object(c.a)(n,[{key:"init",value:function(){var e=this,t=Object(m.a)(Object(p.a)(n.prototype),"init",this).call(this);return t&&(this._view.init(this._user.style),this._view.getForm().addEventListener("submit",(function(t){t.preventDefault(),e._submitForm()}))),t}},{key:"_submitForm",value:function(){var e=this._view.getForm(),t=new FormData(e);this._user.style=function(e){if(null!=e){var t=e.toString();if("blue"==t||"green"==t)return t}return"blue"}(t.get("style")),this._app.getUsers().save(),E(this._user.style)}}]),n}(le),_e=function(e){Object(y.a)(n,e);var t=Object(_.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"Note")).name="",e.description="",e}return Object(c.a)(n,null,[{key:"createNote",value:function(e,t){var i=new n;return i.name=e,i.description=t,i}},{key:"isNameIncorrect",value:function(e){return e.length>100?"The name is too long.":e.length<1?"The name must be at least one character.":""}},{key:"isDescriptionIncorrect",value:function(e){return e.length>2e4?"The description is too long.":""}}]),n}(x),fe=function(){function e(){Object(u.a)(this,e),this.user=void 0,this.router=void 0,this._users=void 0;var t={main:new U(this),login:new J(this),register:new se(this),diary:new ve(this),logout:new me(this),changeStyle:new ye(this)},n={name:"main",control:t.main};this.router=new h(t,n),this.router.route(),this._users=new v("diary-js-users",[K,M,_e,ce]),this._users.load(),this.user=null}return Object(c.a)(e,[{key:"getUsers",value:function(){return this._users}}]),e}(),be=n(6);o.a.render(Object(be.jsxs)(r.a.StrictMode,{children:[Object(be.jsxs)("header",{children:[Object(be.jsx)("nav",{children:Object(be.jsxs)("ul",{children:[Object(be.jsx)("li",{children:Object(be.jsx)("a",{href:"#main",children:"Main page"})}),Object(be.jsx)("li",{children:Object(be.jsx)("a",{href:"#login",children:"Login"})}),Object(be.jsx)("li",{children:Object(be.jsx)("a",{href:"#register",children:"Register"})})]})}),Object(be.jsx)("h1",{children:"Diary"}),Object(be.jsx)("div",{id:"user"})]}),Object(be.jsx)("main",{}),Object(be.jsx)("footer",{})]}),document.getElementById("root"));new fe;l()}},[[20,1,2]]]);
//# sourceMappingURL=main.ab1c9578.chunk.js.map